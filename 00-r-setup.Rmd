```{r setup}
# data manipulation
library(tidyverse)
library(lubridate)

# statistics
library(moments)

# switching models
library(MSwM)
library(MSGARCH)

# plotting
library(ggplot2)
library(gridExtra)
theme_set(theme_minimal())
theme_fill_uep <- function(...) {
  scale_fill_brewer(palette = "Greens", ...)
}
theme_color_uep <- function(...) {
  scale_color_brewer(palette = "Greens", ...)
}
options(
  ggplot2.discrete.fill = theme_fill_uep,
  ggplot2.discrete.colour = theme_color_uep
)
primary_color <- "#005322"
update_geom_defaults("line", list(color = primary_color))

# tables and export
library(knitr)
library(kableExtra)
options(
  knitr.kable.NA = "â€“"
)
```

```{r custom-functions}
custom_markov_plot <- function(data, probs) {
  data %>%
    mutate(probs = probs) %>%
    as_tibble() %>%
    select(Data, return, probs) %>%
    pivot_longer(c(return, probs), names_to = "type") %>%
    ggplot(aes(Data, value)) +
      geom_line() +
      facet_grid(rows = vars(type), scales = "free")
}
```